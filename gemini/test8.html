<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>智能咖啡机 UI</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* 隐藏滚动条但保留滚动功能 */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* 自定义滑动条样式 */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #d97706; /* amber-600 */
            margin-top: -8px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(217, 119, 6, 0.5);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #4b5563;
            border-radius: 2px;
        }
        
        /* 模拟极宽屏幕比例 (仅用于浏览器演示，实际设备全屏即可) */
        body {
            background-color: #000;
            display: flex;
            align-items: center;
            justify_content: center;
            height: 100vh;
            overflow: hidden;
            font-family: 'Segoe UI', sans-serif;
        }
        #app-container {
            /* 保持宽屏比例 */
            width: 100%;
            height: 100%;
            max-width: 1200px; /* 限制最大宽度 */
            aspect-ratio: 20/9; /* 模拟宽屏 */
            position: relative;
            background: #111827;
            overflow: hidden;
        }
    </style>
</head>
<body>

    <div id="app-container" x-data="coffeeMachine()" class="text-white select-none">
        
        <div x-show="page === 'standby'" 
             @click="wakeUp()"
             x-transition:leave="transition ease-out duration-500"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             class="absolute inset-0 z-50 cursor-pointer flex items-center justify-center bg-black">
            <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?q=80&w=2000&auto=format&fit=crop" 
                 class="absolute inset-0 w-full h-full object-cover opacity-60" alt="Standby">
            <div class="relative z-10 text-center animate-pulse">
                <h1 class="text-4xl font-light tracking-[0.5em] uppercase text-amber-500 mb-2">Barista AI</h1>
                <p class="text-sm text-gray-400">轻触屏幕唤醒</p>
            </div>
        </div>

        <div x-show="page === 'selection'" 
             x-transition:enter="transition ease-out duration-500"
             x-transition:enter-start="opacity-0 transform scale-95"
             x-transition:enter-end="opacity-100 transform scale-100"
             class="absolute inset-0 flex flex-col justify-center px-8 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900">
            
            <h2 class="text-xl font-bold text-amber-500 mb-4 ml-2">请选择您的饮品</h2>
            
            <div class="flex space-x-6 overflow-x-auto scrollbar-hide pb-4 items-center h-full">
                <template x-for="drink in drinks" :key="drink.id">
                    <div @click="selectDrink(drink)" 
                         class="flex-shrink-0 w-48 h-56 relative rounded-2xl overflow-hidden group cursor-pointer border border-gray-700 hover:border-amber-500 transition-all duration-300 transform hover:scale-105 bg-gray-800">
                        <img :src="drink.img" class="absolute inset-0 w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity">
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                        <div class="absolute bottom-4 left-4">
                            <h3 class="text-lg font-bold text-white" x-text="drink.name"></h3>
                            <p class="text-xs text-amber-400" x-text="drink.desc"></p>
                        </div>
                    </div>
                </template>
            </div>
            
            <button @click="page = 'standby'" class="absolute top-4 right-4 text-gray-500 hover:text-white">
                <i class="fa-solid fa-power-off"></i>
            </button>
        </div>

        <div x-show="page === 'operation'" 
             class="absolute inset-0 flex flex-col bg-gray-900 px-8 py-4"
             @click="closeAllModals()">
            
            <div class="flex justify-between items-center mb-2 h-10">
                <div class="flex items-center space-x-3">
                    <button @click="page = 'selection'; resetState()" class="text-gray-400 hover:text-white">
                        <i class="fa-solid fa-arrow-left"></i>
                    </button>
                    <span class="text-lg font-bold text-amber-500" x-text="selectedDrink?.name"></span>
                </div>
            </div>

            <div class="flex-1 grid grid-cols-3 gap-8 items-center justify-center">

                <div class="flex flex-col items-center relative">
                    <div class="h-6 mb-2 text-sm font-bold text-green-400 transition-opacity duration-300"
                         :class="status.grind === 'done' ? 'opacity-100' : 'opacity-0'">
                        <i class="fa-solid fa-check"></i> 研磨完成
                    </div>

                    <div @click.stop="startProcess('grind')"
                         class="w-28 h-28 rounded-full border-[6px] flex items-center justify-center cursor-pointer transition-all duration-500 relative"
                         :class="{
                            'border-gray-700 text-gray-500 hover:border-gray-500': status.grind === 'idle',
                            'border-amber-500 border-t-transparent animate-spin text-amber-500': status.grind === 'running',
                            'border-green-500 text-green-500': status.grind === 'done'
                         }">
                        <i class="fa-solid fa-gear text-3xl" x-show="status.grind !== 'running'"></i>
                    </div>
                    <span class="mt-2 text-sm text-gray-400">研磨</span>

                    <div class="mt-4 w-full">
                        <button @click.stop="toggleModal('grind')" 
                                class="w-full py-2 bg-gray-800 rounded-lg border border-gray-700 hover:border-amber-500 flex justify-between items-center px-4 transition-colors">
                            <span class="text-xs text-gray-400">粗细度</span>
                            <span class="text-sm font-bold text-amber-500" x-text="config.grindLevel + '%'"></span>
                        </button>
                        
                        <div x-show="modals.grind" 
                             @click.stop
                             x-transition
                             class="absolute bottom-16 left-0 w-full bg-gray-800/90 backdrop-blur-md border border-gray-600 rounded-xl p-4 z-20 shadow-xl">
                            <div class="flex justify-between text-xs text-gray-400 mb-2">
                                <span>细</span>
                                <span>粗</span>
                            </div>
                            <input type="range" min="0" max="100" x-model="config.grindLevel" class="w-full">
                        </div>
                    </div>
                </div>

                <div class="flex flex-col items-center relative">
                    <div class="h-6 mb-2 text-sm font-bold text-green-400 transition-opacity duration-300"
                         :class="status.extract === 'done' ? 'opacity-100' : 'opacity-0'">
                        <i class="fa-solid fa-check"></i> 萃取完成
                    </div>

                    <div @click.stop="startProcess('extract')"
                         class="w-28 h-28 rounded-full border-[6px] flex items-center justify-center cursor-pointer transition-all duration-500"
                         :class="{
                            'border-gray-700 text-gray-500 hover:border-gray-500': status.extract === 'idle',
                            'border-amber-600 border-b-transparent animate-spin text-amber-600': status.extract === 'running',
                            'border-green-500 text-green-500': status.extract === 'done'
                         }">
                        <i class="fa-solid fa-droplet text-3xl" x-show="status.extract !== 'running'"></i>
                    </div>
                    <span class="mt-2 text-sm text-gray-400">萃取</span>

                    <div class="mt-4 w-full flex space-x-2">
                        <button @click.stop="config.doubleShot = !config.doubleShot" 
                                class="flex-1 py-2 rounded-lg border text-xs flex flex-col items-center justify-center transition-colors"
                                :class="config.doubleShot ? 'bg-amber-900/30 border-amber-500 text-amber-500' : 'bg-gray-800 border-gray-700 text-gray-400'">
                            <i class="fa-solid" :class="config.doubleShot ? 'fa-mug-hot' : 'fa-mug-saucer'"></i>
                            <span x-text="config.doubleShot ? '双杯' : '单杯'" class="mt-1 scale-90"></span>
                        </button>
                        <button @click.stop="config.isHot = !config.isHot" 
                                class="flex-1 py-2 rounded-lg border text-xs flex flex-col items-center justify-center transition-colors"
                                :class="config.isHot ? 'bg-red-900/30 border-red-500 text-red-500' : 'bg-blue-900/30 border-blue-500 text-blue-400'">
                            <i class="fa-solid" :class="config.isHot ? 'fa-temperature-high' : 'fa-snowflake'"></i>
                            <span x-text="config.isHot ? '热水' : '常温'" class="mt-1 scale-90"></span>
                        </button>
                    </div>
                </div>

                <div class="flex flex-col items-center relative">
                    <div class="h-6 mb-2 text-sm font-bold text-green-400 transition-opacity duration-300"
                         :class="status.froth === 'done' ? 'opacity-100' : 'opacity-0'">
                        <i class="fa-solid fa-check"></i> 打泡完成
                    </div>

                    <div @click.stop="startProcess('froth')"
                         class="w-28 h-28 rounded-full border-[6px] flex items-center justify-center cursor-pointer transition-all duration-500 relative"
                         :class="{
                            'border-gray-700 text-gray-500 hover:border-gray-500': status.froth === 'idle',
                            'border-gray-200 border-l-transparent animate-spin text-white': status.froth === 'running',
                            'border-green-500 text-green-500': status.froth === 'done'
                         }">
                        <i class="fa-solid fa-wind text-3xl" x-show="status.froth !== 'running'"></i>
                    </div>
                    <span class="mt-2 text-sm text-gray-400">打泡</span>

                    <div class="mt-4 w-full flex space-x-2">
                        <button @click.stop="toggleModal('frothTemp')" 
                                class="flex-1 py-2 bg-gray-800 rounded-lg border border-gray-700 hover:border-amber-500 flex flex-col items-center justify-center transition-colors">
                            <span class="text-[10px] text-gray-400">温度</span>
                            <span class="text-xs font-bold text-amber-500" x-text="config.frothTemp + '°'"></span>
                        </button>
                        
                        <button @click.stop="toggleModal('frothFoam')" 
                                class="flex-1 py-2 bg-gray-800 rounded-lg border border-gray-700 hover:border-amber-500 flex flex-col items-center justify-center transition-colors">
                            <span class="text-[10px] text-gray-400">丰度</span>
                            <span class="text-xs font-bold text-amber-500" x-text="config.frothFoam + '%'"></span>
                        </button>

                        <div x-show="modals.frothTemp" 
                             @click.stop
                             x-transition
                             class="absolute bottom-16 left-0 w-full bg-gray-800/90 backdrop-blur-md border border-gray-600 rounded-xl p-4 z-20 shadow-xl">
                            <div class="flex justify-between text-xs text-gray-400 mb-2">
                                <span>50°C</span>
                                <span>80°C</span>
                            </div>
                            <input type="range" min="50" max="80" x-model="config.frothTemp" class="w-full">
                        </div>

                         <div x-show="modals.frothFoam" 
                             @click.stop
                             x-transition
                             class="absolute bottom-16 left-0 w-full bg-gray-800/90 backdrop-blur-md border border-gray-600 rounded-xl p-4 z-20 shadow-xl">
                            <div class="flex justify-between text-xs text-gray-400 mb-2">
                                <span>稀薄</span>
                                <span>绵密</span>
                            </div>
                            <input type="range" min="0" max="100" x-model="config.frothFoam" class="w-full">
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <script>
        function coffeeMachine() {
            return {
                page: 'standby', // 'standby', 'selection', 'operation'
                selectedDrink: null,
                
                // 饮品数据
                drinks: [
                    { id: 1, name: '意式浓缩', desc: 'Espresso', img: 'https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?auto=format&fit=crop&w=400&q=80' },
                    { id: 2, name: '拿铁', desc: 'Latte', img: 'https://images.unsplash.com/photo-1570968992194-79569335cd2c?auto=format&fit=crop&w=400&q=80' },
                    { id: 3, name: '卡布奇诺', desc: 'Cappuccino', img: 'https://images.unsplash.com/photo-1572442388796-11668a67e53d?auto=format&fit=crop&w=400&q=80' },
                    { id: 4, name: '美式', desc: 'Americano', img: 'https://images.unsplash.com/photo-1551033406-611cf9a28f67?auto=format&fit=crop&w=400&q=80' },
                    { id: 5, name: '馥芮白', desc: 'Flat White', img: 'https://images.unsplash.com/photo-1577968897966-3d4325b36b61?auto=format&fit=crop&w=400&q=80' }
                ],

                // 制作状态: 'idle' (空闲), 'running' (制作中), 'done' (完成)
                status: {
                    grind: 'idle',
                    extract: 'idle',
                    froth: 'idle'
                },

                // 配置参数
                config: {
                    grindLevel: 50,    // 研磨粗细
                    doubleShot: false, // 是否双杯
                    isHot: true,       // 热水/常温
                    frothTemp: 65,     // 打泡温度
                    frothFoam: 70      // 打泡丰度
                },

                // 弹窗状态
                modals: {
                    grind: false,
                    frothTemp: false,
                    frothFoam: false
                },

                wakeUp() {
                    this.page = 'selection';
                },

                selectDrink(drink) {
                    this.selectedDrink = drink;
                    this.page = 'operation';
                    this.resetState();
                },

                resetState() {
                    // 重置所有状态和弹窗
                    this.status = { grind: 'idle', extract: 'idle', froth: 'idle' };
                    this.modals = { grind: false, frothTemp: false, frothFoam: false };
                },

                // 控制弹窗互斥显示
                toggleModal(type) {
                    const current = this.modals[type];
                    // 关闭所有
                    this.modals.grind = false;
                    this.modals.frothTemp = false;
                    this.modals.frothFoam = false;
                    // 切换当前
                    this.modals[type] = !current;
                },

                closeAllModals() {
                    this.modals.grind = false;
                    this.modals.frothTemp = false;
                    this.modals.frothFoam = false;
                },

                // 模拟制作过程
                startProcess(type) {
                    if (this.status[type] === 'running') return; // 防止重复点击
                    
                    // 关闭所有弹窗
                    this.closeAllModals();

                    // 状态变为运行中（圆圈旋转）
                    this.status[type] = 'running';

                    // 模拟3秒后完成
                    setTimeout(() => {
                        this.status[type] = 'done';
                        
                        // 2秒后恢复原状（可选，根据需求保留Done状态或重置）
                        // 这里设置保留Done状态，点击可再次启动
                        setTimeout(() => {
                             this.status[type] = 'idle';
                        }, 2000);
                        
                    }, 3000);
                }
            }
        }
    </script>
</body>
</html>
